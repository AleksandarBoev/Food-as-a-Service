<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>View Restaurant</title>
    <th:block th:replace="../fragments/bootstrap4"></th:block>
</head>
<body>
<th:block th:replace="../fragments/header"></th:block>

<main>
    <h1 th:text="${restaurantViewModel.getName()}"></h1>

    <img th:src="${restaurantViewModel.getImageUrl()}">

    <p th:text="${restaurantViewModel.getDescription()}"></p>

    <th:block th:if="${#session.getAttribute('roles').contains('ROLE_MANAGER')}">
    <a th:href="@{/restaurants/edit/{id}(id=${restaurantViewModel.getId()})}">
        <button type="button" class="btn btn-primary">Edit</button>
    </a>

    <a th:href="@{/restaurants/delete/{id}(id=${restaurantViewModel.getId()})}">
        <button type="button" class="btn btn-danger">Delete</button>
    </a>
    <a th:href="@{/restaurants/sales/{id}(id=${restaurantViewModel.getId()})}">
        <button type="button" class="btn btn-secondary">Sales</button>
    </a>
    </th:block>

    <hr/>
    <th:block th:if="${#session.getAttribute('roles').contains('ROLE_MANAGER')}">

        <p th:if="${productAllViewModels.isEmpty()}">
            No products!
            <a th:href="@{/products/{id}/create(id=${restaurantViewModel.getId()})}">Create</a>
            some
        </p>
        <a th:unless="${productAllViewModels.isEmpty()}" th:href="@{/products/{id}/create(id=${restaurantViewModel.getId()})}">
            <button>Add Product</button>
        </a>
    </th:block>

    <th:block th:replace="../fragments/products-all-fragment"></th:block>
</main>

<th:block th:replace="../fragments/footer"></th:block>
</body>
</html>